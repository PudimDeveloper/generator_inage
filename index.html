<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador IA</title>
    <style>
        body { 
            margin: 0; 
            padding: 20px; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            font-family: Arial, sans-serif;
            color: white;
        }
        h1 { margin: 10px 0; }
        #prompt-display { 
            background: rgba(255,255,255,0.1); 
            padding: 15px; 
            border-radius: 10px; 
            margin: 10px 0; 
            text-align: center;
            max-width: 90vw;
            word-break: break-word;
        }
        #img { 
            max-width: 90vw; 
            max-height: 70vh; 
            border-radius: 20px; 
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            margin: 20px 0;
        }
        #status { padding: 10px; border-radius: 5px; margin: 10px; }
        .loading { background: rgba(255,255,0,0.2); }
        .success { background: rgba(0,255,0,0.2); }
        .error { background: rgba(255,0,0,0.2); }
    </style>
</head>
<body>
    <h1>üñºÔ∏è Gerador de Imagens IA</h1>
    <div id="prompt-display">Carregando...</div>
    #img-container>
    <div id="status" class="loading">üîÑ Iniciando...</div>

    <script src="https://js.puter.com/v2/"></script>
    <script>
        const params = new URLSearchParams(window.location.search);
        const prompt = decodeURIComponent(params.get('prompt') || 'gato fofo astronauta no espa√ßo');
        
        document.getElementById('prompt-display').textContent = `"${prompt}"`;
        const status = document.getElementById('status');
        
        function updateStatus(msg, type = 'loading') {
            status.textContent = msg;
            status.className = type;
        }
        
        updateStatus('üì• Carregando Puter.js...');
        
        if (window.puter?.ai?.txt2img) {
            updateStatus('üé® Gerando sua imagem...');
            puter.ai.txt2img(prompt, { model: 'flux' })
                .then(img => {
                    document.getElementById('img-container').innerHTML = '';
                    document.getElementById('img-container').appendChild(img);
                    updateStatus('‚úÖ Pronto! Compartilhe o link!', 'success');
                })
                .catch(err => {
                    updateStatus(`‚ùå Erro: ${err.message}. Tente: seu-site.com/?prompt=nova-ideia`, 'error');
                    console.error(err);
                });
        } else {
            updateStatus('‚ùå Puter.js n√£o carregou. Atualize a p√°gina.', 'error');
        }
    </script>
</body>
</html>